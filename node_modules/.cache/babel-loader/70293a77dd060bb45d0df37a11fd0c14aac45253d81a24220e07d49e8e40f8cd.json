{"ast":null,"code":"var _jsxFileName = \"/Users/nishantranjansingh/Capstone Project/Capstone 15 July/my-shop/src/pages/AuthenticationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { GoogleLogin } from '@react-oauth/google';\nimport { jwtDecode } from 'jwt-decode';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport './AuthenticationPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AuthenticationPage() {\n  _s();\n  var _location$state, _location$state$from;\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  const [isLoginMode, setIsLoginMode] = useState(true);\n  const [error, setError] = useState('');\n  const location = useLocation();\n  const navigate = useNavigate();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/\";\n  useEffect(() => {\n    if (user) {\n      navigate(from, {\n        replace: true\n      });\n    }\n  }, [user, navigate, from]);\n  const onSuccess = credentialResponse => {\n    try {\n      const decoded = jwtDecode(credentialResponse.credential);\n      const userProfile = {\n        name: decoded.name,\n        email: decoded.email,\n        picture: decoded.picture,\n        sub: decoded.sub,\n        contactNumber: '',\n        deliveryAddress: ''\n      };\n      setUser(decoded);\n      localStorage.setItem('user', JSON.stringify(decoded));\n      localStorage.setItem('userProfile', JSON.stringify(userProfile));\n      setError('');\n      navigate(from, {\n        replace: true\n      });\n    } catch (err) {\n      setError('Error processing authentication. Please try again.');\n    }\n  };\n  const onError = error => {\n    setError(error.detail || (isLoginMode ? 'Login Failed' : 'Registration Failed'));\n  };\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Welcome, \", user.name, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.picture,\n          alt: \"profile\",\n          className: \"profile-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Email: \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You are now authenticated with Google.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Redirecting to your dashboard...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [isLoginMode ? 'Login' : 'Register', \" with Google\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GoogleLogin, {\n        onSuccess: onSuccess,\n        onError: onError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mode-switch\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsLoginMode(!isLoginMode),\n          className: \"mode-switch-btn\",\n          children: isLoginMode ? 'Need to register?' : 'Already have an account?'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthenticationPage, \"Uo8hXzEXtTYaciFk+YwRHa2pyGM=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = AuthenticationPage;\nexport default AuthenticationPage;\nvar _c;\n$RefreshReg$(_c, \"AuthenticationPage\");","map":{"version":3,"names":["React","useState","useEffect","GoogleLogin","jwtDecode","useLocation","useNavigate","jsxDEV","_jsxDEV","AuthenticationPage","_s","_location$state","_location$state$from","user","setUser","JSON","parse","localStorage","getItem","isLoginMode","setIsLoginMode","error","setError","location","navigate","from","state","pathname","replace","onSuccess","credentialResponse","decoded","credential","userProfile","name","email","picture","sub","contactNumber","deliveryAddress","setItem","stringify","err","onError","detail","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onClick","_c","$RefreshReg$"],"sources":["/Users/nishantranjansingh/Capstone Project/Capstone 15 July/my-shop/src/pages/AuthenticationPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoogleLogin } from '@react-oauth/google';\nimport { jwtDecode } from 'jwt-decode';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport './AuthenticationPage.css';\n\nfunction AuthenticationPage() {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  const [isLoginMode, setIsLoginMode] = useState(true);\n  const [error, setError] = useState('');\n  const location = useLocation();\n  const navigate = useNavigate();\n  const from = location.state?.from?.pathname || \"/\";\n\n  useEffect(() => {\n    if (user) {\n      navigate(from, { replace: true });\n    }\n  }, [user, navigate, from]);\n\n  const onSuccess = credentialResponse => {\n    try {\n      const decoded = jwtDecode(credentialResponse.credential);\n      const userProfile = {\n        name: decoded.name,\n        email: decoded.email,\n        picture: decoded.picture,\n        sub: decoded.sub,\n        contactNumber: '',\n        deliveryAddress: ''\n      };\n      \n      setUser(decoded);\n      localStorage.setItem('user', JSON.stringify(decoded));\n      localStorage.setItem('userProfile', JSON.stringify(userProfile));\n      setError('');\n      navigate(from, { replace: true });\n    } catch (err) {\n      setError('Error processing authentication. Please try again.');\n    }\n  };\n\n  const onError = (error) => {\n    setError(error.detail || (isLoginMode ? 'Login Failed' : 'Registration Failed'));\n  };\n\n  if (user) {\n    return (\n      <div className=\"auth-page\">\n        <div className=\"auth-content\">\n          <h2>Welcome, {user.name}!</h2>\n          <img src={user.picture} alt=\"profile\" className=\"profile-image\" />\n          <p>Email: {user.email}</p>\n          <p>You are now authenticated with Google.</p>\n          <p>Redirecting to your dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"auth-content\">\n        <h2>{isLoginMode ? 'Login' : 'Register'} with Google</h2>\n        <GoogleLogin onSuccess={onSuccess} onError={onError} />\n        {error && <div className=\"error-message\">{error}</div>}\n        <div className=\"mode-switch\">\n          <button \n            onClick={() => setIsLoginMode(!isLoginMode)}\n            className=\"mode-switch-btn\"\n          >\n            {isLoginMode ? 'Need to register?' : 'Already have an account?'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AuthenticationPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}